# 在main函数之前做了哪些工作

1. 系统先读取App的可执行文件(Mach-O文件)，从里面获得`dyld`的路径，然后加载`dyld`,`dyld`去初始化运行环境。
2. 开启缓存策略，加载程序相关依赖库(其中也包含我们的可执行文件)，并对这些库进行链接，最后调用每个依赖库的初始化方法，在这一步，`runtime`被初始化。
3. 当所有依赖库的初始化后，轮到最后一位(程序可执行文件)进行初始化，在这时`runtime`会对项目中所有类进行类机构初始化，然后调用所有的`load`方法。最后`dyld`返回`main`函数地址，`main`函数被调用，我们便来到程序入口`main`函数。

[iOS 程序 main函数之前发生什么](https://www.jianshu.com/p/5efe327ac7ea)

